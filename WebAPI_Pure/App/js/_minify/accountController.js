!function(){"use strict";angular.module("app").controller("registerAndLoginCtrl",["userAccount","changePass","$location","currentUser",function(t,r,s,o){var a=this;a.show=!1,a.phaseOneHide=!1,a.userData={userName:"",email:"",password:"",confirmPassword:""},a.login=function(){a.userData.grant_type="password",a.userData.confirmPassword=a.userData.password,a.userData.userName=a.userData.email,t.loginUser(a.userData,function(t,r){o.setProfile(t.userName,!0,t.roles),sessionStorage.setItem("access_token",t.access_token),"Admin"==t.roles?s.path("/Admin"):s.path("/Login")},function(t){a.errorMsg=t.statusText})},a.forgotPassword=function(){s.path("/ForgotPassword")}}]).controller("changePswCtrl",["$scope","changePass",function(t,r){var s=this;s.formData={},s.changePassword=function(){r.update(s.formData,function(r){r.Succeeded&&(s.formData={},t.changeForm.$setPristine(),s.msg="Lösenordet ändrat.")},function(t){s.errorMsg=t.statusText})}}]).controller("forgotPassCtrl",["$scope","fp",function(t,r){var s=this;s.formData={},s.msg="",s.validMsg=!1,s.send=function(){r.get(s.formData,function(r){s.msg="Länken är nu skickad till den angivna eposten.",s.validMsg=!0,s.formData={},t.forgotForm.$setPristine()},function(t){s.errorMsg=t.statusText})}}]).controller("recoverPassCtrl",["rp","$routeParams","$location",function(t,r,s){var o=this;o.formData={ID:r.userId,Code:r.code,Email:"",Password:"",ConfirmPassword:""},o.confirmNewPass=function(){t.post(o.formData,function(t){s.path("/Login")},function(t){o.errorMsg=t.statusText})}}]).controller("confirmMailCtrl",["cm","$routeParams",function(t,r){var s=this;t.get({userId:r.userId,code:r.code},function(t){console.log(t[0]),"C"==t[0]?s.cmMsg="Tack, Du har nu bekräftat din epost.":s.cmMsg="Något gick fel, försök igen."},function(t){s.errorMsg=t.statusText})}])}();