!function(){"use strict";angular.module("app").controller("registerAndLoginCtrl",["user","userAccount","changePass","$scope","$location","currentUser",function(t,o,r,s,e,a){var n=this;n.show=!1,n.phaseOneHide=!1,n.formData={},n.regForm=function(){t.save(n.formData,function(t){console.log(t),n.formData={},s.regForm.$setPristine()})},n.userData={},n.login=function(){n.userData.grant_type="password",n.userData.confirmPassword=n.userData.password,n.userData.userName=n.userData.email,o.loginUser(n.userData,function(t,o){a.setProfile(t.userName,!0,t.roles),sessionStorage.setItem("access_token",t.access_token),"Admin"==t.roles?e.path("/Admin"):(t.roles="User")?e.path("/User"):e.path("/Login")},function(t){n.errorMsg=t.statusText})},n.forgotPassword=function(){e.path("/ForgotPassword")}}]).controller("changePswCtrl",["$scope","changePass",function(t,o){var r=this;r.formData={},r.changePassword=function(){o.update(r.formData,function(o){o.Succeeded&&(r.formData={},t.changeForm.$setPristine(),r.msg="Lösenordet ändrat.")},function(t){r.errorMsg=t.statusText})}}]).controller("forgotPassCtrl",["$scope","fp",function(t,o){var r=this;r.formData={},r.msg="",r.validMsg=!1,r.send=function(){o.get(r.formData,function(o){r.msg="Länken är nu skickad till den angivna eposten.",r.validMsg=!0,r.formData={},t.forgotForm.$setPristine()},function(t){r.errorMsg=t.statusText})}}]).controller("recoverPassCtrl",["rp","$routeParams","$location",function(t,o,r){var s=this;s.formData={ID:o.userId,Code:o.code,Email:"",Password:"",ConfirmPassword:""},s.confirmNewPass=function(){t.post(s.formData,function(t){r.path("/Login")},function(t){s.errorMsg=t.statusText})}}]).controller("confirmMailCtrl",["cm","$routeParams",function(t,o){var r=this;t.get({userId:o.userId,code:o.code},function(t){console.log(t[0]),"C"==t[0]?r.cmMsg="Tack, Du har nu bekräftat din epost.":r.cmMsg="Något gick fel, försök igen."},function(t){r.errorMsg=t.statusText})}])}();